# Codebase Structure

**Analysis Date:** 2026-01-27

## Directory Layout

```
to-tui-plugins/
├── .github/                 # GitHub workflows and CI configuration
├── .planning/               # GSD planning documents
│   └── codebase/           # Analysis documents (ARCHITECTURE.md, etc)
├── jira-claude/            # The jira-claude plugin (single plugin in registry)
│   ├── src/
│   │   └── lib.rs         # Complete plugin implementation
│   ├── Cargo.toml         # Rust crate configuration
│   ├── Cargo.lock         # Dependency lock file
│   ├── plugin.toml        # Plugin manifest and metadata
│   ├── README.md          # Plugin user documentation
│   ├── CHANGELOG.md       # Version history
│   └── target/            # Build artifacts (generated, not committed)
├── .gitignore             # Git ignore rules
├── LICENSE                # MIT license
├── README.md              # Registry documentation
├── justfile               # Just task runner configuration
└── marketplace.toml       # Registry manifest (all plugins listed)
```

## Directory Purposes

**jira-claude/**
- Purpose: Self-contained plugin package following to-tui plugin structure
- Contains: Rust crate source, build config, metadata, documentation
- Key files: `src/lib.rs` (all logic), `Cargo.toml` (deps), `plugin.toml` (manifest)

**jira-claude/src/**
- Purpose: Single Rust library file containing all plugin code
- Contains: FFI exports, plugin implementation, data models, helpers

**.planning/codebase/**
- Purpose: Analysis documents for code navigation and developer guidance
- Contains: ARCHITECTURE.md, STRUCTURE.md, CONVENTIONS.md, TESTING.md, STACK.md, INTEGRATIONS.md, CONCERNS.md
- Generated by: GSD codebase mapping tools

**.github/**
- Purpose: CI/CD pipelines and GitHub automation
- Contains: Workflow files for building, testing, releases

## Key File Locations

**Entry Points:**
- `jira-claude/src/lib.rs` lines 1-33: FFI module export and plugin factory
- `jira-claude/Cargo.toml`: Crate manifest, defines cdylib output

**Configuration:**
- `jira-claude/plugin.toml`: Plugin metadata, permissions, external dependencies
- `jira-claude/Cargo.toml`: Rust dependencies, edition, crate type
- `marketplace.toml`: Registry manifest listing all available plugins

**Core Logic:**
- `jira-claude/src/lib.rs` lines 39-346: `JiraClaudePlugin` implementation
- `jira-claude/src/lib.rs` lines 50-123: Command execution and data fetching
- `jira-claude/src/lib.rs` lines 125-181: Prompt building and AI invocation

**Models & Parsing:**
- `jira-claude/src/lib.rs` lines 360-437: Data structures and deserialization
- `jira-claude/src/lib.rs` lines 415-437: ADF text extraction utilities

**Documentation:**
- `jira-claude/README.md`: Plugin user guide
- `jira-claude/CHANGELOG.md`: Version history
- `README.md`: Registry overview

## Naming Conventions

**Files:**
- Rust source files: lowercase with underscores (not applicable here—single lib.rs file)
- Configuration files: lowercase with dots (plugin.toml, Cargo.toml, marketplace.toml)
- Markdown docs: Title case (README.md, CHANGELOG.md, LICENSE)
- Library output: `lib{plugin_name}.{so,dylib,dll}` in target/release/ (built from plugin name via Cargo)

**Directories:**
- Plugin directories: lowercase kebab-case (jira-claude/)
- Standard Rust: src/, target/, .github/
- Planning: .planning/codebase/

**Code Identifiers:**
- Struct names: PascalCase (`JiraClaudePlugin`, `AcliTicket`, `JiraComment`)
- Function names: snake_case (`fetch_jira_ticket`, `run_command`, `extract_text_from_adf`)
- Module-level functions: snake_case (free functions like `truncate_string`)
- Type aliases: PascalCase (FFI types are from interface crate)
- Method names: snake_case following Rust convention

## Where to Add New Code

**New Feature (enhance todo generation):**
- Primary code: `jira-claude/src/lib.rs` → add method to `impl JiraClaudePlugin`
- Tests: No test files currently. Add tests in `#[cfg(test)]` module at bottom of lib.rs if testing is added
- Configuration: Edit `jira-claude/plugin.toml` if new permissions or external dependencies needed

**New Plugin (separate from jira-claude):**
- Create directory: `{plugin-name}/` at repo root
- Implementation: `{plugin-name}/src/lib.rs` with `impl Plugin` trait
- Config: `{plugin-name}/Cargo.toml` with `crate-type = ["cdylib"]`
- Manifest: `{plugin-name}/plugin.toml` with metadata
- Registry: Add entry to `marketplace.toml` at repo root
- Documentation: Add `{plugin-name}/README.md` and `{plugin-name}/CHANGELOG.md`

**Utilities (shared between plugins):**
- Create: `shared/` directory with workspace structure (if code is reused across multiple plugins)
- Currently: No shared code. All code is plugin-specific in each plugin directory.

**Configuration Changes:**
- Plugin settings: Edit `jira-claude/plugin.toml` for permissions, external dependencies
- Build config: Edit `jira-claude/Cargo.toml` for dependencies and settings
- Registry listing: Edit `marketplace.toml` at root to list new/updated plugins

## Special Directories

**target/:**
- Purpose: Build artifacts and compiled output
- Generated: Yes (via `cargo build --release`)
- Committed: No (in .gitignore)
- Contains: Compiled plugin .so/.dylib/.dll files, intermediate build files

**.planning/codebase/**
- Purpose: GSD codebase analysis documents
- Generated: Yes (via GSD mapping agent)
- Committed: Yes (source of truth for code navigation)
- Contains: ARCHITECTURE.md, STRUCTURE.md, CONVENTIONS.md, TESTING.md, STACK.md, INTEGRATIONS.md, CONCERNS.md

**.github/**
- Purpose: GitHub Actions workflows and CI configuration
- Generated: No (manually maintained)
- Committed: Yes
- Contains: Build, test, and release automation

**jira-claude/Cargo.lock:**
- Purpose: Dependency version lock for reproducible builds
- Generated: No (manually committed for stability)
- Committed: Yes
- Contains: Exact versions of all transitive dependencies

## File Role Summary

| File | Role |
|------|------|
| `jira-claude/src/lib.rs` | Complete implementation—all code here |
| `jira-claude/Cargo.toml` | Rust crate config, cdylib type, dependencies |
| `jira-claude/plugin.toml` | Plugin metadata, permissions, external tools |
| `jira-claude/README.md` | End-user documentation |
| `jira-claude/CHANGELOG.md` | Version history and breaking changes |
| `marketplace.toml` | Registry manifest—lists all available plugins |
| `justfile` | Task automation (build, release, etc.) |
| `.planning/codebase/*.md` | Developer navigation documents |

---

*Structure analysis: 2026-01-27*
